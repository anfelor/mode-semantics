
    e ::= x | xₐ | e e | λx. e
        | (e, e) | let (x, x) = e in e | () | e; e
        | inl e | inr e | case e (inl x. e) (inr x. e)
        | region e | borrow e as x in e
        | ref e | !e | e := e | reuse e with e

    𝓵 ::= global | local

    𝓸 ::= many | once

    υ ::= unique | shared

    μ ::= ⟨𝓵,𝓸,υ⟩

    τ ::= τ @ μ → τ @ μ | τ * τ | 1 | τ + τ | τ ref

    Γ ::= ε | Γ; x : τ @ μ | Γ; lock(𝓵,𝓸)


      Γ ⊢ e : τ @ μ₁
      μ₁ ≤ μ₂
     ──────────────────
      Γ ⊢ e : τ @ μ₂


      𝓵₁ ≤ 𝓵₂
      𝓸₁ ≤ 𝓸₂
      υ₁ ≤ υ₂
      𝓵₁ ≤ 𝓵ᵢ for each lock(𝓵ᵢ,𝓸ᵢ) in Γ'
      𝓸₁ ≤ 𝓸ᵢ for each lock(𝓵ᵢ,𝓸ᵢ) in Γ'
      dual(𝓸ᵢ) ≤ υ₂ for each lock(𝓵ᵢ,𝓸ᵢ) in Γ'
    ──────────────────────────────────────────────────
     Γ; x : τ @ ⟨𝓵₁,𝓸₁,υ₁⟩; Γ' ⊢ x : τ @ ⟨𝓵₂,𝓸₂,υ₂⟩


      𝓵₁ ≤ 𝓵₂
      𝓵₁ ≤ 𝓵ᵢ for each lock(𝓵ᵢ,_) in Γ'
    ───────────────────────────────────────────────────────
     Γ; x : τ @ ⟨𝓵₁,many,υ₁⟩; Γ' ⊢ xₐ : τ @ ⟨𝓵₂,𝓸₂,shared⟩


      Γ; lock(𝓵,𝓸); x : τ₁ @ μ₁ ⊢ e : τ₂ @ μ₂
    ───────────────────────────────────────────
      Γ ⊢ λx.e : (τ₁ @ μ₁ → τ₂ @ μ₂) @ ⟨𝓵,𝓸,_⟩


      Γ ⊢ e₁ : (τ₁ @ μ₁ → τ₂ @ μ₂) @ μ₃
      Γ ⊢ e₂ : τ₁ @ μ₁
    ───────────────────────────────────────────
      Γ ⊢ e₁ e₂ : τ₂ @ μ₂


      Γ ⊢ e₁ : τ₁ @ μ
      Γ ⊢ e₂ : τ₂ @ μ
    ──────────────────────────────
      Γ ⊢ (e₁, e₂) : τ₁ * τ₂ @ μ


      Γ ⊢ e₁ : τ₁ * τ₂ @ μ₁
      Γ; x₁ : τ₁ @ μ₁; x₂ : τ₂ @ μ₁ ⊢ e₂ : τ₃ @ μ₂
    ────────────────────────────────────────────────
      Γ ⊢ let (x₁, x₂) = e₁ in e₂ : τ₃ @ μ₂


    ──────────────────
      Γ ⊢ () : 1 @ μ


      Γ ⊢ e₁ : 1 @ μ₁
      Γ ⊢ e₂ : τ @ μ₂
    ──────────────────────
      Γ ⊢ e₁; e₂ : τ @ μ₂


      Γ ⊢ e : τ₁ @ μ
    ──────────────────────────────
      Γ ⊢ inl e : τ₁ + τ₂ @ μ


      Γ ⊢ e : τ₂ @ μ
    ──────────────────────────────
      Γ ⊢ inr e : τ₁ + τ₂ @ μ


      Γ ⊢ e₁ : τ₁ + τ₂ @ μ₁
      Γ; x₁ : τ₁ @ μ₁ ⊢ e₂ : τ₃ @ μ₂
      Γ; x₂ : τ₂ @ μ₁ ⊢ e₃ : τ₃ @ μ₂
    ───────────────────────────────────────────────────
      Γ ⊢ case e₁ (inl x₁. e₂) (inr x₂. e₃) : τ₃ @ μ₂


      Γ ⊢ e : τ @ ⟨global,𝓸,υ⟩
    ───────────────────────────────────
      Γ ⊢ region e : τ @ ⟨global,𝓸,υ⟩


      Γ ⊢ e₁ : τ₁ @ ⟨_,many,_⟩
      Γ; x : τ₁ @ ⟨local,_,shared⟩ ⊢ e₂ : τ₂ @ ⟨global,𝓸,υ⟩
    ──────────────────────────────────────────────────────────
      Γ ⊢ borrow e₁ as x in e₂ : τ₂ @ ⟨global,𝓸,υ⟩


      Γ ⊢ e : τ @ ⟨global,many,_⟩
    ───────────────────────────────────
      Γ ⊢ ref e : τ ref @ μ


      Γ ⊢ e : τ ref @ μ
    ─────────────────────────────────────
      Γ ⊢ !e : τ @ ⟨_,_,shared⟩


      Γ ⊢ e₁ : τ ref @ μ₁
      Γ ⊢ e₂ : τ @ ⟨global,many,_⟩
    ─────────────────────────────────────
      Γ ⊢ e₁ := e₂ : 1 @ μ₂


      Γ ⊢ e₁ : τ₁ ref @ ⟨𝓵,_,unique⟩
      Γ ⊢ e₂ : τ₂ @ ⟨global,many,_⟩
    ─────────────────────────────────────────────────
      Γ ⊢ reuse e₁ with e₂ : τ₂ ref @ ⟨𝓵,_,_⟩

